{"version":3,"sources":["plugin.js"],"names":["saveCmd","modes","wysiwyg","source","readOnly","exec","editor","editorhtml","getData","setTimeout","saveurl","$","element","data","attribute","attr","ajax","url","dataType","cache","type","success","html","textStatus","jqXHR","alert","error","errorThrown","responseText","onSubmit","e","preventDefault","CKEDITOR","plugins","add","icons","init","$form","form","bind","removeAttr","addCommand","ui","addButton","label","lang","save","toolbar","command"],"mappings":"CASA,WAEC,GAAIA,IAEHC,OAAUC,QAAQ,EAAGC,OAAO,GAC5BC,SAAW,EAEXC,KAAO,SAAUC,GAEP,GAAIC,GAAaD,EAAOE,SAExBC,YAAW,WACP,GAAIC,GAAUC,EAAEL,EAAOM,QAAQD,GAAGE,KAAK,WACnCC,EAAYH,EAAEL,EAAOM,QAAQD,GAAGE,KAAK,YACrCC,KAAWA,EAAY,OAC3B,IAAID,KACJA,GAAKC,GAAaP,EAElBM,EADgBF,EAAE,2BAA2BI,KAAK,YAChCJ,EAAE,2BAA2BI,KAAK,WACjDL,EACCC,EAAEK,MACEC,IAAKP,EACLG,KAAMA,EACNK,SAAU,OACVC,OAAO,EACPC,KAAM,OACNC,QAAU,SAASC,EAAMC,EAAYC,GACjCC,MAAMH,IAEVI,MAAQ,SAASF,EAAOD,EAAYI,GAChCF,MAAMD,EAAMI,iBAIpBH,MAAM,eAEX,KAIPI,EAAW,SAASC,EAAGjB,GACvBiB,EAAEC,iBAMTC,UAASC,QAAQC,IAHA,cAKVC,MAAO,aACbC,KAAO,SAAU9B,GAEP,GAAI+B,GAAQ1B,EAAEL,EAAOM,QAAQD,EAAE2B,KAC/BD,GAAME,KAAK,SAAUV,GAErBQ,EAAMG,WAAW,WAEZlC,GAAOmC,WAbN,aAa8BzC,EAG7CM,GAAOoC,GAAGC,UAAW,cAEnBC,MAAQtC,EAAOuC,KAAKC,KAAKC,QACzBC,QAnBa","file":"plugin.js","sourcesContent":["/*\r\nCopyright (c) 2003-2011, CKSource - Frederico Knabben. All rights reserved.\r\nFor licensing, see LICENSE.html or http://ckeditor.com/license\r\n*/\r\n\r\n/**\r\n * @fileSave plugin.\r\n */\r\n\r\n(function()\r\n{\r\n\tvar saveCmd =\r\n\t{\r\n\t\tmodes : { wysiwyg:1, source:1 },\r\n\t\treadOnly : 1,\r\n\r\n\t\texec : function( editor )\r\n\t\t{\r\n            var editorhtml = editor.getData();\r\n\r\n            setTimeout(function() {\r\n                var saveurl = $(editor.element.$).data('saveurl');\r\n                var attribute = $(editor.element.$).data('attribute');\r\n                if(!attribute) attribute = 'html';\r\n                var data = {};\r\n                data[attribute] = editorhtml;\r\n                var csrfParam = $('meta[name=\"csrf-param\"]').attr('content');\r\n                data[csrfParam] = $('meta[name=\"csrf-token\"]').attr('content');\r\n                if(saveurl) {\r\n                    $.ajax({\r\n                        url: saveurl,\r\n                        data: data,\r\n                        dataType: 'html',\r\n                        cache: false,\r\n                        type: 'POST',\r\n                        'success':function(html, textStatus, jqXHR) {\r\n                            alert(html);\r\n                        },\r\n                        'error':function(jqXHR, textStatus, errorThrown) {\r\n                            alert(jqXHR.responseText);\r\n                        }\r\n                    });\r\n                } else {\r\n                    alert('No SaveURL');\r\n                }\r\n            }, 1);\r\n\t\t}\r\n\t};\r\n\r\n    var onSubmit = function(e, data) {\r\n        e.preventDefault();\r\n    };\r\n\r\n\tvar pluginName = 'inlinesave';\r\n\r\n\t// Register a plugin named \"save\".\r\n\tCKEDITOR.plugins.add( pluginName,\r\n\t{\r\n        icons: 'inlinesave',\r\n\t\tinit : function( editor )\r\n\t\t{\r\n            var $form = $(editor.element.$.form);\r\n            $form.bind('submit', onSubmit);\r\n            //$form.data('_onsubmit', $form.attr('onsubmit'));\r\n            $form.removeAttr('onsubmit');\r\n\r\n\t\t\tvar command = editor.addCommand( pluginName, saveCmd );\r\n\t\t\t//command.modes = { wysiwyg : !!( editor.element.$.form ) };\r\n\r\n\t\t\teditor.ui.addButton( 'InlineSave',\r\n\t\t\t\t{\r\n\t\t\t\t\tlabel : editor.lang.save.toolbar,\r\n\t\t\t\t\tcommand : pluginName\r\n\t\t\t\t});\r\n\t\t}\r\n\t});\r\n})();\r\n"]}